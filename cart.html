<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Cart - Aqua Fish Farm</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background-color: #f0f8ff;
      font-family: Arial, sans-serif;
    }

    .ex-item-card {
      border-radius: 12px;
      background-color: white;
      padding: 1rem;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      width: 100%;
      transition: box-shadow 0.3s ease-in-out;
    }

    .ex-image {
      height: 180px;
      object-fit: cover;
      border-radius: 10px;
    }

    h5 {
      font-size: 0.95rem;
    }

    .quantity-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      margin-top: 8px;
      font-size: 0.9rem;
    }

    .quantity-controls button {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      font-weight: bold;
      border: 1px solid #ccc;
      background-color: white;
      color: #333;
      cursor: pointer;
      transition: 0.2s;
      font-size: 0.85rem;
      padding: 0;
    }

    .quantity-controls button:hover {
      background-color: #e2e6ea;
    }

    .quantity-display {
      min-width: 20px;
      text-align: center;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .total-price {
      font-size: 1.1rem;
      font-weight: 600;
      margin-top: 15px;
    }

    .btn-remove {
      background-color: #f8d7da;
      border: none;
      color: #721c24;
      margin-top: 8px;
      font-size: 0.85rem;
      padding: 3px 6px;
    }

    .btn-remove:hover {
      background-color: #f5c6cb;
    }
  </style>
</head>
<body>
  <div class="container mt-4">
    <h2 class="text-center mb-4">Your Cart</h2>
    <div id="cartItems" class="row justify-content-center"></div>
    <div class="text-center mt-3">
      <p id="totalPrice" class="total-price"></p>
      <button class="btn btn-success" onclick="confirmOrder()">Confirm Order</button>
      <a href="index.html" class="btn btn-secondary ms-2" onclick="localStorage.setItem('showCards','true')">Back to Shop</a>
    </div>
  </div>

  <script>
    let cartData = JSON.parse(localStorage.getItem("fishCart")) || [];
    const cartContainer = document.getElementById("cartItems");
    const totalPriceEl = document.getElementById("totalPrice");

    function renderCart() {
      cartContainer.innerHTML = "";
      if (cartData.length === 0) {
        cartContainer.innerHTML = "<p class='text-center w-100'>Your cart is empty.</p>";
        totalPriceEl.textContent = "";
        return;
      }

      let total = 0;
      cartData.forEach((item, i) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        const col = document.createElement("div");
        col.className = "col-12 col-md-6 col-lg-3 mb-4";
        col.innerHTML = `
          <div class="ex-item-card text-center">
            <img src="${item.img}" class="ex-image w-100 mb-2" alt="${item.name}">
            <h5 style="font-size: 0.89rem;"><strong>${item.name}</strong></h5>
            <p style="font-size: 0.85rem;"><strong>â‚¹${item.price}</strong></p>

            <div class="quantity-controls">
              <button onclick="changeQty(${i}, -1)">âˆ’</button>
              <span class="quantity-display">${item.quantity}</span>
              <button onclick="changeQty(${i}, 1)">+</button>
            </div>
<br>
            <p style="font-size: 0.9rem;"><strong>Total: â‚¹${itemTotal}</strong></p>
            <button class="btn btn-remove btn-sm" onclick="removeItem(${i})">Remove</button>
          </div>
        `;
        cartContainer.appendChild(col);
      });

      totalPriceEl.textContent = "Grand Total: â‚¹" + total;
    }

    function changeQty(index, change) {
      cartData[index].quantity += change;
      if (cartData[index].quantity <= 0) {
        cartData.splice(index, 1);
      }
      localStorage.setItem("fishCart", JSON.stringify(cartData));
      renderCart();
    }

    function removeItem(index) {
      cartData.splice(index, 1);
      localStorage.setItem("fishCart", JSON.stringify(cartData));
      renderCart();
    }

   function confirmOrder() {
  if (cartData.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  let message = "ðŸ›’ *Aqua Fish Farm Order* ðŸŸ%0A%0A";
  message += "Fish Name | Quantity | Price per Unit | Total%0A";
  message += "----------------------------------------%0A";

  cartData.forEach(item => {
    message += `${item.name} | ${item.quantity} | â‚¹${item.price} | â‚¹${item.price * item.quantity}%0A`;
  });

  const total = cartData.reduce((sum, item) => sum + item.price * item.quantity, 0);
  message += "----------------------------------------%0A";
  message += `*Grand Total: â‚¹${total}*`;

  const whatsappNumber = "918887041756";
  const whatsappURL = `https://wa.me/${whatsappNumber}?text=${message}`;
  window.open(whatsappURL, "_blank");
}


    renderCart();
  </script>
</body>
</html>
